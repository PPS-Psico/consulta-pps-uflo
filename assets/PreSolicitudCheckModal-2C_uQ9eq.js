import{bI as L,j as e,M as A,R as q,r as g,n as F,K as M,a0 as U,Y as B,N as O,z as J,k as V,bJ as K,f as W,g as Z,i as Q,C as G,as as $,T as Y,bZ as X,b_ as ee,ar as ae}from"./index-Dad3ZKyZ.js";const te=({isOpen:o,onClose:i,onConfirm:r,criterios:a})=>o?L.createPortal(e.jsx("div",{className:"fixed inset-0 z-[1300] flex items-end sm:items-center justify-center bg-slate-900/60 backdrop-blur-sm p-0 sm:p-4 animate-fade-in",onClick:i,children:e.jsxs("div",{className:"w-full sm:w-[95%] max-w-3xl bg-white dark:bg-[#0F172A] rounded-t-3xl sm:rounded-3xl shadow-2xl flex flex-col max-h-[90dvh] sm:max-h-[85vh] border border-slate-200 dark:border-slate-800 animate-scale-in overflow-hidden",onClick:l=>l.stopPropagation(),children:[e.jsx("div",{className:"p-6 border-b border-slate-100 dark:border-slate-800 bg-white/80 dark:bg-slate-900/80 backdrop-blur-md sticky top-0 z-10",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2.5 rounded-xl bg-indigo-50 dark:bg-indigo-500/10 text-indigo-600 dark:text-indigo-400",children:e.jsx("span",{className:"material-icons !text-2xl",children:"verified"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-black text-slate-800 dark:text-white tracking-tight leading-none",children:"Estado de Acreditación"}),e.jsx("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400 mt-1",children:"Verificación automática de requisitos académicos"})]})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar bg-slate-50/50 dark:bg-[#0B1120]",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${a.cumpleHorasTotales?"bg-white border-emerald-100 shadow-sm dark:bg-slate-800 dark:border-emerald-900/30":"bg-white border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Carga Horaria"}),e.jsx("span",{className:`material-icons !text-lg ${a.cumpleHorasTotales?"text-emerald-500":"text-slate-300"}`,children:a.cumpleHorasTotales?"check_circle":"schedule"})]}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx("span",{className:`text-2xl font-black ${a.cumpleHorasTotales?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"}`,children:Math.round(a.horasTotales)}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"/ 350 hs"})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${a.cumpleHorasTotales?"bg-emerald-500":"bg-blue-500"}`,style:{width:`${Math.min(100,a.horasTotales/350*100)}%`}})})]}),e.jsxs("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${a.cumpleRotacion?"bg-white border-emerald-100 shadow-sm dark:bg-slate-800 dark:border-emerald-900/30":"bg-white border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Rotación"}),e.jsx("span",{className:`material-icons !text-lg ${a.cumpleRotacion?"text-emerald-500":"text-amber-400"}`,children:a.cumpleRotacion?"check_circle":"cached"})]}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx("span",{className:`text-2xl font-black ${a.cumpleRotacion?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"}`,children:a.orientacionesCursadasCount}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"/ 2 áreas"})]}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-tight",children:"Áreas clínicas, educacionales, laborales, etc."})]}),e.jsxs("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${a.cumpleHorasOrientacion?"bg-white border-emerald-100 shadow-sm dark:bg-slate-800 dark:border-emerald-900/30":"bg-white border-slate-200 dark:bg-slate-800 dark:border-slate-700"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Especialidad"}),e.jsx("span",{className:`material-icons !text-lg ${a.cumpleHorasOrientacion?"text-emerald-500":"text-purple-400"}`,children:a.cumpleHorasOrientacion?"check_circle":"stars"})]}),e.jsxs("div",{className:"flex items-baseline gap-1 mb-1",children:[e.jsx("span",{className:`text-2xl font-black ${a.cumpleHorasOrientacion?"text-emerald-600 dark:text-emerald-400":"text-slate-700 dark:text-slate-200"}`,children:Math.round(a.horasOrientacionElegida)}),e.jsx("span",{className:"text-xs font-bold text-slate-400",children:"/ 70 hs"})]}),e.jsx("div",{className:"h-1.5 w-full bg-slate-100 dark:bg-slate-700/50 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full ${a.cumpleHorasOrientacion?"bg-emerald-500":"bg-purple-500"}`,style:{width:`${Math.min(100,a.horasOrientacionElegida/70*100)}%`}})})]}),e.jsxs("div",{className:`p-4 rounded-2xl border transition-all duration-300 ${a.tienePracticasPendientes?"bg-amber-50 border-amber-200 dark:bg-amber-900/10 dark:border-amber-800/30":"bg-white border-emerald-100 shadow-sm dark:bg-slate-800 dark:border-emerald-900/30"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400",children:"Estado Prácticas"}),e.jsx("span",{className:`material-icons !text-lg ${a.tienePracticasPendientes?"text-amber-500":"text-emerald-500"}`,children:a.tienePracticasPendientes?"warning":"task_alt"})]}),e.jsx("div",{className:"mb-1",children:e.jsx("span",{className:`text-lg font-bold ${a.tienePracticasPendientes?"text-amber-700 dark:text-amber-500":"text-emerald-700 dark:text-emerald-400"}`,children:a.tienePracticasPendientes?"Pendientes":"Todas Finalizadas"})}),e.jsx("p",{className:"text-[10px] text-slate-500 font-medium leading-tight",children:a.tienePracticasPendientes?"Debes finalizar tus prácticas activas.":"Sin cursos activos."})]})]}),e.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 border border-blue-100 dark:border-blue-800 p-5",children:[e.jsxs("div",{className:"flex gap-4 relative z-10",children:[e.jsx("div",{className:"p-2.5 bg-white dark:bg-blue-800 rounded-full shadow-sm shrink-0 h-fit text-blue-600 dark:text-blue-200",children:e.jsx("span",{className:"material-icons !text-lg",children:"description"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-white text-sm mb-1",children:"Informes Corregidos"}),e.jsxs("p",{className:"text-xs text-slate-600 dark:text-slate-300 leading-relaxed max-w-lg",children:["Es requisito indispensable contar con"," ",e.jsx("strong",{children:"todos los informes de prácticas corregidos y aprobados"}),". El sistema permite avanzar, pero asegúrate de cumplir para evitar rechazos."]})]})]}),e.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-24 h-24 bg-blue-500/10 rounded-full blur-2xl"})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-900 flex flex-col sm:flex-row items-center justify-between gap-4 z-20",children:[a.cumpleHorasTotales&&a.cumpleRotacion&&a.cumpleHorasOrientacion&&!a.tienePracticasPendientes?e.jsx("div",{className:"hidden sm:block"}):e.jsx("p",{className:"text-[11px] text-amber-600 dark:text-amber-500 font-medium text-center sm:text-left leading-tight max-w-sm hidden sm:block bg-amber-50 dark:bg-amber-900/10 px-3 py-2 rounded-lg border border-amber-100 dark:border-amber-900/30",children:"El sistema detecta que aún no cumples los requisitos para la acreditación. Si esto es un error o tienes la autorización del coordinador, puedes continuar."}),e.jsxs("div",{className:"flex items-center gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:i,className:"flex-1 sm:flex-none px-6 py-3 text-sm font-bold text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-xl transition-colors",children:"Cancelar"}),e.jsxs("button",{onClick:r,className:`
                flex-1 sm:flex-none px-8 py-3 text-white rounded-xl text-sm font-bold shadow-lg transition-all flex items-center justify-center gap-2
                ${a.cumpleHorasTotales&&a.cumpleRotacion&&a.cumpleHorasOrientacion&&!a.tienePracticasPendientes?"bg-emerald-500 hover:bg-emerald-600 shadow-emerald-500/30 hover:shadow-emerald-500/40 hover:-translate-y-0.5":"bg-slate-900 dark:bg-white dark:text-slate-900 shadow-slate-900/20 dark:shadow-none hover:bg-slate-800 dark:hover:bg-slate-200"}
              `,children:[e.jsx("span",{children:a.cumpleHorasTotales&&a.cumpleRotacion&&a.cumpleHorasOrientacion&&!a.tienePracticasPendientes?"Confirmar Todo":"Continuar"}),e.jsx("span",{className:"material-icons !text-sm",children:"arrow_forward"})]})]})]})]})}),document.body):null;function se(o,i){let r=0;const a=new Date(o);let l=0;for(;r<i&&l<365;){a.setDate(a.getDate()+1);const m=a.getDay(),p=a.getMonth();!(m===0||m===6)&&!(p===0)&&r++,l++}return a}function z(o,i){if(o>i)return-z(i,o);let r=0;const a=new Date(o),l=new Date(i);l.setHours(0,0,0,0),a.setHours(0,0,0,0);let m=0;for(;a<l&&m<365;){a.setDate(a.getDate()+1);const p=a.getDay(),u=a.getMonth();!(p===0||p===6)&&!(u===0)&&r++,m++}return r}const le=({status:o,requestDate:i,studentName:r})=>{const a=new Date(i),l=se(a,14),m=new Date,u=m.getMonth()===0,v=(s=>(s==null?void 0:s.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").trim())||"")(o),h=v==="cargado"||v==="finalizada",k=v==="en proceso",S=z(m,l),x=u,P=l.getTime()-a.getTime(),D=m.getTime()-a.getTime();let C=Math.min(100,Math.max(5,D/P*100));x&&(C=Math.min(C,95)),S<0&&(C=100);const N=(r==null?void 0:r.split(" ")[0])||"Estudiante",j=S<0&&!h&&!x,w=e.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-600 via-indigo-500 to-purple-600 dark:from-blue-400 dark:via-indigo-400 dark:to-purple-400",children:N});if(h)return e.jsx("div",{className:"w-full animate-fade-in-up mb-8",children:e.jsxs("div",{className:"relative overflow-hidden rounded-[2.5rem] bg-emerald-50/80 dark:bg-emerald-950/20 border border-emerald-100 dark:border-emerald-800 p-10 sm:p-16 shadow-2xl shadow-emerald-100/50 dark:shadow-none text-center backdrop-blur-xl",children:[e.jsx("div",{className:"absolute top-0 right-0 -mt-20 -mr-20 h-96 w-96 rounded-full bg-emerald-100/40 dark:bg-emerald-900/10 blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 -mb-20 -ml-20 h-64 w-64 rounded-full bg-teal-100/40 dark:bg-teal-900/10 blur-3xl pointer-events-none"}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center gap-8",children:[e.jsx("div",{className:"h-24 w-24 bg-white dark:bg-slate-900 rounded-full flex items-center justify-center shadow-lg animate-bounce-slow text-emerald-500 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800/50",children:e.jsx("span",{className:"material-icons !text-5xl",children:"verified"})}),e.jsxs("div",{className:"space-y-4 max-w-3xl",children:[e.jsxs("h1",{className:"text-5xl sm:text-6xl font-black tracking-tighter text-slate-900 dark:text-white drop-shadow-sm leading-tight",children:["¡Todo listo, ",w,"!"]}),e.jsxs("p",{className:"text-xl text-slate-600 dark:text-slate-300 font-medium leading-relaxed",children:["Tu acreditación ha sido completada exitosamente. ",e.jsx("br",{className:"hidden sm:block"}),"Tus horas de PPS ya se encuentran cargadas en el sistema académico SAC."]})]}),e.jsx("div",{className:"mt-6",children:e.jsxs("a",{href:"https://alumno.uflo.edu.ar",target:"_blank",rel:"noopener noreferrer",className:"group inline-flex items-center gap-3 px-10 py-4 bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold text-lg rounded-2xl shadow-xl hover:shadow-2xl hover:shadow-indigo-500/20 hover:-translate-y-1 transition-all duration-300",children:[e.jsx("span",{children:"Verificar en SAC"}),e.jsx("span",{className:"material-icons !text-2xl group-hover:translate-x-1 transition-transform",children:"open_in_new"})]})})]})]})});let E=()=>e.jsx("span",{className:"text-slate-900 dark:text-white",children:"¡Solicitud Recibida!"}),T="Estamos evaluando tu solicitud y validando la documentación presentada. Este proceso es manual y requiere revisión por parte de coordinación.",t="Solicitud Enviada",d="text-blue-600 bg-blue-100 dark:text-blue-300 dark:bg-blue-900/30 border-blue-200 dark:border-blue-800",n=0;k&&(E=()=>e.jsxs(e.Fragment,{children:["Todo marcha bien, ",w,"."]}),T="Tus documentos fueron validados correctamente y el expediente se encuentra en el circuito de acreditación interna.",t="En Proceso",d="text-indigo-600 bg-indigo-100 dark:text-indigo-300 dark:bg-indigo-900/30 border-indigo-200 dark:border-indigo-800",n=1);const c=[{title:"Validación Documental",desc:"Revisión de firmas y planillas.",icon:"inventory_2"},{title:"Circuito Administrativo",desc:"Aprobación final por áreas UFLO.",icon:"settings_suggest"},{title:"Acreditación Final",desc:"Carga definitiva en sistema SAC.",icon:"school"}];return e.jsxs("div",{className:"w-full animate-fade-in-up pb-12 space-y-8",children:[e.jsxs("div",{className:"relative overflow-hidden glass-panel rounded-[3rem] shadow-xl p-8 sm:p-14 mb-8",children:[e.jsx("div",{className:"absolute top-0 right-0 w-[800px] h-[800px] bg-gradient-to-bl from-blue-100/30 to-transparent dark:from-blue-900/20 rounded-full blur-[120px] -mr-60 -mt-60 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:`inline-flex items-center gap-2 px-5 py-2 rounded-full text-xs font-black uppercase tracking-widest mb-6 border shadow-sm ${d}`,children:[e.jsxs("span",{className:"relative flex h-3 w-3",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-current opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-current"})]}),t]}),e.jsx("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-black leading-tight mb-6 tracking-tighter",children:E()}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 text-lg sm:text-xl leading-relaxed max-w-4xl font-medium",children:T})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"hidden lg:flex lg:col-span-8",children:e.jsxs("div",{className:"w-full bg-white/80 dark:bg-[#0F172A]/80 rounded-[3rem] border border-slate-200/80 dark:border-slate-800 p-10 sm:p-12 backdrop-blur-xl h-full flex flex-col shadow-lg relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 opacity-20"}),e.jsxs("div",{className:"flex items-center gap-4 mb-8 flex-shrink-0",children:[e.jsx("div",{className:"p-3 bg-slate-100 dark:bg-slate-800 rounded-2xl text-slate-600 dark:text-slate-300 shadow-sm",children:e.jsx("span",{className:"material-icons !text-3xl",children:"timeline"})}),e.jsx("h3",{className:"font-black text-slate-800 dark:text-white text-2xl tracking-tight",children:"Etapas del Proceso"})]}),e.jsxs("div",{className:"flex-grow flex flex-col justify-between pl-4 py-4 relative",children:[e.jsx("div",{className:"absolute left-[30px] top-8 bottom-8 w-1 bg-slate-100 dark:bg-slate-800 -z-10 rounded-full"}),e.jsx("div",{className:"absolute left-[30px] top-8 w-1 bg-gradient-to-b from-emerald-400 to-blue-500 -z-10 rounded-full transition-all duration-1000",style:{height:`${n/(c.length-1)*85}%`}}),c.map((s,b)=>{const y=b<n,_=b===n,H=b>n;return e.jsxs("div",{className:`relative flex items-center gap-8 ${H?"opacity-50 grayscale":"opacity-100"}`,children:[e.jsx("div",{className:`flex-shrink-0 w-16 h-16 rounded-full border-[6px] flex items-center justify-center z-10 transition-all duration-500
                                            ${y?"bg-emerald-500 border-white dark:border-slate-900 text-white shadow-xl shadow-emerald-500/30":_?"bg-white dark:bg-slate-900 border-blue-500 text-blue-600 shadow-2xl ring-4 ring-blue-100 dark:ring-blue-900/30 scale-110":"bg-slate-100 dark:bg-slate-800 border-white dark:border-slate-900 text-slate-400"}
                                        `,children:e.jsx("span",{className:`material-icons !text-2xl ${_?"animate-pulse":""}`,children:y?"check":s.icon})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h4",{className:`text-xl font-black tracking-tight ${_?"text-blue-700 dark:text-blue-400":y?"text-emerald-700 dark:text-emerald-400":"text-slate-500"}`,children:s.title}),y&&e.jsx("span",{className:"text-[9px] bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-md font-black uppercase tracking-widest",children:"OK"}),_&&e.jsx("span",{className:"text-[9px] bg-blue-100 text-blue-700 px-2 py-0.5 rounded-md font-black uppercase tracking-widest animate-pulse",children:"EN CURSO"})]}),e.jsx("p",{className:"text-slate-500 dark:text-slate-400 text-base font-medium leading-relaxed max-w-md",children:s.desc})]})]},b)})]})]})}),e.jsxs("div",{className:"col-span-1 lg:col-span-4 flex flex-col gap-6",children:[e.jsxs("div",{className:"glass-panel rounded-[3rem] shadow-xl overflow-hidden flex flex-col p-10",children:[e.jsx("h3",{className:"font-bold text-slate-500 text-xs uppercase tracking-widest mb-6",children:"Tiempo de Resolución"}),x&&e.jsxs("div",{className:"mb-6 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-100 dark:border-amber-800/50 rounded-2xl flex items-start gap-3",children:[e.jsx("span",{className:"material-icons text-amber-500 mt-0.5 !text-xl",children:"beach_access"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] font-black text-amber-800 dark:text-amber-200 uppercase mb-1",children:"Receso de Verano"}),e.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-300 leading-tight",children:"Enero no computa plazos administrativos."})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[e.jsx("span",{className:`text-8xl font-black tracking-tighter leading-none ${j?"text-rose-500":x?"text-amber-500":"text-slate-900 dark:text-white"}`,children:x?"~":Math.max(0,S)}),e.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase tracking-[0.2em] mt-3",children:x?"En Pausa":"Días Hábiles"})]}),e.jsx("div",{className:"w-full bg-slate-100 dark:bg-slate-800 rounded-full h-3 mb-8 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ${x?"bg-amber-400 striped-bar":j?"bg-rose-500":"bg-blue-600"}`,style:{width:`${C}%`}})}),e.jsxs("div",{className:"flex justify-between items-center text-center",children:[e.jsxs("div",{className:"flex-1 border-r border-slate-100 dark:border-slate-800",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"Enviado"}),e.jsx("p",{className:"text-sm font-bold text-slate-700 dark:text-slate-300 font-mono",children:A(a.toISOString())})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1",children:"Estimado"}),e.jsx("p",{className:`text-sm font-bold font-mono ${j?"text-rose-500":"text-slate-700 dark:text-slate-300"}`,children:A(l.toISOString())})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-[3rem] p-10 shadow-xl border border-slate-200 dark:border-slate-700 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-50 dark:bg-blue-500/10 rounded-full blur-3xl -mr-10 -mt-10"}),e.jsx("h3",{className:"font-bold text-slate-400 dark:text-slate-500 text-[10px] uppercase tracking-[0.2em] mb-4",children:"Soporte y Consultas"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-6 leading-relaxed font-medium",children:"Si el plazo de resolución ya venció y no visualizas tus horas, contacta a coordinación."}),e.jsxs("a",{href:j?`mailto:blas.rivera@uflouniversidad.edu.ar?subject=Consulta Acreditación - ${N}`:void 0,className:`w-full flex items-center justify-center gap-3 py-4 rounded-2xl font-bold transition-all ${j?"bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-500/20":"bg-slate-100 dark:bg-slate-700 text-slate-400 dark:text-slate-500 border border-slate-200 dark:border-slate-600 cursor-not-allowed"}`,children:[e.jsx("span",{className:"material-icons",children:j?"mail":"lock_clock"}),e.jsx("span",{children:j?"Contactar Coordinación":"Consulta Bloqueada"})]})]})]})]})]})},I=({solicitud:o})=>{const i=o[J]||"",r=o[M]||"Pendiente",a=o[V],l=K(r);return e.jsx("div",{className:"relative group bg-white dark:bg-slate-800/40 rounded-xl p-4 border border-slate-200/60 dark:border-slate-700/60 hover:border-blue-300 dark:hover:border-blue-700 transition-all duration-300",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 justify-between sm:items-center",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center ${l.iconContainerClass.replace("border","")} bg-opacity-20 dark:bg-opacity-10`,children:e.jsx("span",{className:`material-icons !text-2xl ${l.accentBg.replace("bg-","text-")}`,children:l.icon})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-100 text-base leading-tight",children:i||"Institución sin nombre"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1",children:[e.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide border ${l.labelClass}`,children:r}),e.jsx("span",{className:"text-xs text-slate-400",children:"•"}),e.jsxs("span",{className:"text-xs text-slate-500 dark:text-slate-400 flex items-center gap-1",children:[e.jsx("span",{className:"material-icons !text-[10px]",children:"update"}),A(a)]})]})]})]})})})},R=({icon:o,title:i,description:r,onClick:a,colorScheme:l,className:m=""})=>{const p={blue:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-800",teal:"bg-teal-50 text-teal-700 border-teal-200 hover:bg-teal-100 dark:bg-teal-900/20 dark:text-teal-300 dark:border-teal-800",slate:"bg-slate-50 text-slate-600 border-slate-200 cursor-not-allowed dark:bg-slate-800 dark:text-slate-400 dark:border-slate-700"};return e.jsxs("button",{type:"button",onClick:a,className:`w-full flex items-center gap-4 p-4 rounded-xl border transition-all duration-300 text-left group ${p[l]} ${m}`,children:[e.jsx("div",{className:"p-2 bg-white dark:bg-slate-900 rounded-lg shadow-sm",children:e.jsx("span",{className:"material-icons !text-2xl",children:o})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-sm",children:i}),e.jsx("p",{className:"text-xs opacity-80 mt-0.5",children:r})]}),l!=="slate"&&e.jsx("div",{className:"ml-auto opacity-0 group-hover:opacity-100 transition-opacity transform translate-x-[-10px] group-hover:translate-x-0 duration-300",children:e.jsx("span",{className:"material-icons",children:"arrow_forward"})})]})},re=({solicitudes:o,onCreateSolicitud:i,onRequestFinalization:r,criterios:a,finalizacionRequest:l,informeTasks:m=[]})=>{const[p,u]=g.useState(!1),f=g.useMemo(()=>m.some(x=>x.informeSubido&&(x.nota==="Sin calificar"||x.nota==="Entregado (sin corregir)")),[m]),v=a?a.cumpleHorasTotales&&a.cumpleRotacion&&a.cumpleHorasOrientacion&&!a.tienePracticasPendientes&&!f:!1,{activeRequests:h,historyRequests:k}=g.useMemo(()=>{const x=[],P=[],D=["finalizada","cancelada","rechazada","no se pudo concretar","pps realizada","solicitud invalida","realizada"],C=["archivado"];return o.forEach(N=>{const j=F(N[M]);C.includes(j)||(D.some(w=>j.includes(w))?P.push(N):x.push(N))}),{activeRequests:x,historyRequests:P}},[o]),S=()=>{r&&u(!0)};return e.jsxs("div",{className:"space-y-6",children:[l&&e.jsx(le,{status:l[B]||"Pendiente",requestDate:l[U]||l.created_at||""}),!l&&(i||r)&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 mb-2",children:[i&&e.jsx(R,{icon:"add_business",title:"Nueva Solicitud de PPS",description:"Inicia un trámite de autogestión.",onClick:i,colorScheme:"blue"}),r&&e.jsx("div",{className:"md:hidden",children:e.jsx(R,{icon:v?"verified":"lock_clock",title:"Trámite de Acreditación",description:v?"Requisitos cumplidos. Iniciar cierre.":"Faltan requisitos. Toca para ver detalles.",onClick:S,colorScheme:v?"teal":"slate"})})]}),a&&e.jsx(te,{isOpen:p,onClose:()=>u(!1),onConfirm:()=>{r&&r(),u(!1)},criterios:a,informeTask:m[0]}),h.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider pl-1",children:["Gestiones en Curso (",h.length,")"]}),e.jsx("div",{className:"flex flex-col gap-3",children:h.map(x=>e.jsx(I,{solicitud:x},x.id))})]}),k.length>0&&e.jsxs("details",{className:"group pt-4 border-t border-slate-200 dark:border-slate-800",children:[e.jsxs("summary",{className:"flex items-center gap-2 cursor-pointer list-none text-sm font-bold text-slate-500 hover:text-slate-800 dark:text-slate-400 dark:hover:text-slate-200 transition-colors py-2",children:[e.jsx("span",{className:"material-icons transition-transform group-open:rotate-90 text-slate-400 !text-lg",children:"history"}),"Ver Historial (",k.length,")"]}),e.jsx("div",{className:"mt-3 flex flex-col gap-3 pl-2 border-l-2 border-slate-100 dark:border-slate-800",children:k.map(x=>e.jsx(I,{solicitud:x},x.id))})]}),h.length===0&&k.length===0&&!l&&e.jsx(O,{icon:"list_alt",title:"Sin Solicitudes",message:"No tienes trámites de PPS registrados actualmente.",className:"bg-transparent border-none shadow-none p-0 mt-8"})]})},ie=q.memo(re),de=({studentAirtableId:o,onClose:i})=>{const{showToast:r}=W(),[a,l]=g.useState(!1),[m,p]=g.useState(!1),[u,f]=g.useState(null),v=Z(),[h,k]=g.useState({horas:{files:[],uploading:!1,uploadedData:[]},asistencia:{files:[],uploading:!1,uploadedData:[]},informe:{files:[],uploading:!1,uploadedData:[]}}),[S,x]=g.useState(""),P={horas:g.useRef(null),asistencia:g.useRef(null),informe:g.useRef(null)},D=(t,d)=>{if(!t||t.length===0)return;const n=[];for(let c=0;c<t.length;c++){const s=t[c];if(s.size>10*1024*1024){r(`El archivo ${s.name} es demasiado grande (máx 10MB).`,"error");continue}n.push(s)}k(c=>{const b=d==="horas"?[]:[...c[d].files];return{...c,[d]:{...c[d],files:[...b,...n]}}})},C=(t,d)=>{k(n=>{const c=[...n[t].files];return c.splice(d,1),{...n,[t]:{...n[t],files:c}}})},N=(t,d)=>{t.preventDefault(),t.stopPropagation(),t.type==="dragenter"||t.type==="dragover"?f(d):t.type==="dragleave"&&f(null)},j=(t,d)=>{t.preventDefault(),t.stopPropagation(),f(null),t.dataTransfer.files&&t.dataTransfer.files.length>0&&D(t.dataTransfer.files,d)},w=Q({mutationFn:async()=>{if(!o)throw new Error("ID de estudiante no disponible.");const t=Object.keys(h);if(h.horas.files.length===0)throw new Error("Falta la Planilla de Seguimiento.");if(h.asistencia.files.length===0)throw new Error("Falta la Planilla de Asistencia.");if(h.informe.files.length===0)throw new Error("Falta el Informe Final.");const d={};for(const n of t){const c=h[n];if(c.files.length===0)continue;k(b=>({...b,[n]:{...b[n],uploading:!0}}));const s=[];try{for(const b of c.files){const y=await X(b,o,n);s.push({url:y,filename:b.name})}d[n]=s,k(b=>({...b,[n]:{...b[n],uploading:!1,uploadedData:s}}))}catch(b){throw k(y=>({...y,[n]:{...y[n],uploading:!1}})),b}}return await ee(o,{informes:d.informe||[],horas:d.horas||[],asistencias:d.asistencia||[],sugerencias:S}),!0},onSuccess:()=>{l(!0),v.invalidateQueries({queryKey:["finalizacionRequest"]}),v.invalidateQueries({queryKey:["solicitudes"]}),r("Solicitud enviada con éxito. Se procesará tu acreditación.","success")},onError:t=>{console.error("Submission Error:",t);const d=t.message||"Error desconocido";r(`Error al enviar: ${d}. Revisa tu conexión e intenta nuevamente.`,"error")}}),E=async t=>{t.preventDefault(),p(!0);try{const{data:d,error:n}=await Y.storage.from("plantillas").download("Planilla_Seguimiento.xlsx");if(n)throw n;const c=window.URL.createObjectURL(d),s=document.createElement("a");s.href=c,s.download="Planilla_Seguimiento_PPS.xlsx",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(c),r("Plantilla descargada.","success")}catch(d){console.error("Error descargando plantilla",d),r("No se pudo descargar la plantilla.","error")}finally{p(!1)}};if(a)return e.jsxs(G,{title:"Solicitud Recibida",icon:"check_circle",className:"border-emerald-200 dark:border-emerald-800 bg-emerald-50/50 dark:bg-emerald-900/10 shadow-none border",children:[e.jsx("div",{className:"dark:text-slate-200",children:e.jsx(O,{icon:"mark_email_read",title:"¡Documentación Enviada!",message:"Hemos recibido tus archivos correctamente. Tu solicitud está en proceso y el contador de acreditación está activo."})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx($,{variant:"secondary",onClick:()=>i?i():window.location.reload(),children:"Volver al Inicio"})})]});const T=[{key:"horas",label:"Planilla de Seguimiento",desc:"Excel de seguimiento de horas completo.",icon:"schedule",iconColor:"text-blue-500",bgColor:"bg-blue-100 dark:bg-blue-900/30",hasTemplate:!0,allowsMultiple:!1},{key:"asistencia",label:"Planillas de Asistencia",desc:"Registros diarios de todas tus PPS presenciales. Puedes subir fotos o PDFs.",icon:"event_available",iconColor:"text-purple-500",bgColor:"bg-purple-100 dark:bg-purple-900/30",allowsMultiple:!0},{key:"informe",label:"Informes Finales",desc:"Informes de todas las prácticas. Puedes subir múltiples archivos.",icon:"description",iconColor:"text-emerald-500",bgColor:"bg-emerald-100 dark:bg-emerald-900/30",allowsMultiple:!0}];return e.jsxs("div",{className:"animate-fade-in-up h-full flex flex-col bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"p-5 border-b border-indigo-100 dark:border-slate-800 bg-indigo-50/50 dark:bg-slate-900/50 flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white dark:bg-slate-800 text-indigo-600 dark:text-indigo-400 rounded-2xl shadow-sm border border-indigo-100 dark:border-slate-700",children:e.jsx("span",{className:"material-icons !text-2xl",children:"verified"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tight",children:"Solicitud de Finalización"}),e.jsx("p",{className:"text-sm font-medium text-slate-500 dark:text-slate-400",children:"Adjunta la documentación para cerrar el ciclo."})]})]}),e.jsx("button",{onClick:i,className:"p-2 text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-xl transition-all",children:e.jsx("span",{className:"material-icons !text-xl",children:"close"})})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-6 space-y-6 custom-scrollbar",children:[T.map(t=>{const d=h[t.key],n=u===t.key,c=d.files.length>0;return e.jsx("div",{className:`
                            relative rounded-2xl border-2 transition-all duration-300 overflow-hidden
                            ${n?"border-blue-500 bg-blue-50/50 dark:bg-blue-900/20 shadow-lg scale-[1.01]":c?"border-emerald-200 dark:border-emerald-800/50 bg-white dark:bg-slate-800":"border-slate-100 dark:border-slate-800 bg-white dark:bg-slate-800 hover:border-blue-200 dark:hover:border-slate-600"}
                        `,children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-xl ${t.bgColor} ${t.iconColor}`,children:e.jsx("span",{className:"material-icons !text-xl",children:t.icon})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-slate-800 dark:text-slate-200 text-sm",children:t.label}),t.hasTemplate&&e.jsxs("button",{onClick:E,disabled:m,className:"text-[10px] font-bold text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-0.5 mt-0.5",children:[m?"Descargando...":"Descargar plantilla",e.jsx("span",{className:"material-icons !text-[10px]",children:"download"})]})]})]}),c&&e.jsxs("span",{className:"text-[10px] font-bold bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400 px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx("span",{className:"material-icons !text-[12px]",children:"check"}),"Listo"]})]}),e.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mb-4 pl-1",children:t.desc}),e.jsxs("div",{className:`
                                        rounded-xl border-2 border-dashed p-4 text-center cursor-pointer transition-colors
                                        ${n?"border-blue-400 bg-white/50 dark:bg-black/20":"border-slate-200 dark:border-slate-700 hover:border-blue-300 hover:bg-slate-50 dark:hover:bg-slate-700/30"}
                                    `,onDragEnter:s=>N(s,t.key),onDragLeave:s=>N(s,t.key),onDragOver:s=>N(s,t.key),onDrop:s=>j(s,t.key),onClick:()=>{var s;return(s=P[t.key].current)==null?void 0:s.click()},children:[e.jsx("input",{type:"file",ref:P[t.key],onChange:s=>D(s.target.files,t.key),className:"hidden",multiple:t.allowsMultiple,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xls,.xlsx"}),e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:`material-icons !text-2xl ${n?"text-blue-500":"text-slate-300 dark:text-slate-600"}`,children:"cloud_upload"}),e.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300",children:n?"Suelta aquí":c?"Agregar más archivos":"Haz clic para subir"})]})]}),c&&e.jsx("div",{className:"mt-3 space-y-2",children:d.files.map((s,b)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-50 dark:bg-slate-900/50 rounded-lg border border-slate-100 dark:border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[e.jsx("span",{className:"material-icons text-slate-400 !text-base shrink-0",children:"description"}),e.jsx("span",{className:"text-xs font-medium text-slate-700 dark:text-slate-300 truncate",children:s.name})]}),e.jsx("button",{onClick:()=>C(t.key,b),className:"p-1 text-slate-400 hover:text-rose-500 hover:bg-rose-50 dark:hover:bg-rose-900/30 rounded transition-colors",children:e.jsx("span",{className:"material-icons !text-base",children:"close"})})]},b))})]})},t.key)}),e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/10 rounded-2xl border border-amber-100 dark:border-amber-800/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"material-icons text-amber-500 !text-lg",children:"tips_and_updates"}),e.jsx("h3",{className:"text-amber-900 dark:text-amber-100 font-bold text-sm",children:"Espacio de sugerencias (Opcional)"})]}),e.jsx("textarea",{value:S,onChange:t=>x(t.target.value),rows:2,className:"w-full text-xs rounded-xl border border-amber-200 dark:border-amber-800/50 bg-white dark:bg-slate-900 p-3 outline-none focus:ring-2 focus:ring-amber-400 text-slate-700 dark:text-slate-200 placeholder:text-slate-400",placeholder:"¿Algo para mejorar en el proceso?"})]})]}),e.jsxs("div",{className:"p-5 border-t border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 flex flex-col sm:flex-row justify-end items-center gap-3",children:[w.isPending&&e.jsxs("span",{className:"text-xs font-bold text-slate-500 animate-pulse flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-bounce"})," Subiendo archivos..."]}),e.jsxs("div",{className:"flex gap-3 w-full sm:w-auto",children:[e.jsx("button",{onClick:()=>i?i():window.location.reload(),className:"flex-1 sm:flex-none px-4 py-2.5 rounded-xl text-xs font-bold text-slate-500 hover:text-slate-700 hover:bg-slate-100 dark:text-slate-400 dark:hover:bg-slate-800 transition-colors",disabled:w.isPending,children:"Cancelar"}),e.jsx($,{onClick:()=>w.mutate(),isLoading:w.isPending,disabled:h.horas.files.length===0||h.asistencia.files.length===0||h.informe.files.length===0,icon:"send",className:"flex-1 sm:flex-none shadow-lg hover:shadow-xl hover:-translate-y-0.5",children:"Finalizar"})]})]})]})},oe=({isOpen:o,onClose:i,onContinue:r,existingInstitutions:a})=>{const[l,m]=g.useState(""),p=g.useMemo(()=>{if(!l)return a;const u=F(l);return a.filter(f=>F(f).includes(u))},[a,l]);return o?e.jsx("div",{className:"fixed inset-0 z-[1300] flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-fade-in",onClick:i,children:e.jsxs("div",{onClick:u=>u.stopPropagation(),className:"relative w-[95vw] max-h-[85dvh] sm:w-full sm:max-w-2xl sm:max-h-[90vh] bg-white dark:bg-slate-900 rounded-2xl shadow-2xl flex flex-col border border-slate-200 dark:border-slate-800 overflow-hidden animate-scale-in",children:[e.jsxs("div",{className:"p-6 border-b border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 rounded-xl",children:e.jsx("span",{className:"material-icons !text-2xl",children:"warning_amber"})}),e.jsx("h2",{className:"text-xl font-black text-slate-900 dark:text-white tracking-tight",children:"Requisitos Previos"})]}),e.jsx("p",{className:"text-sm font-medium text-slate-600 dark:text-slate-300 leading-relaxed",children:"Antes de iniciar una solicitud de autogestión, por favor verifica lo siguiente:"})]}),e.jsxs("div",{className:"p-6 overflow-y-auto custom-scrollbar space-y-6 bg-white dark:bg-slate-900",children:[e.jsxs("div",{className:"flex gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-xl items-start",children:[e.jsx("span",{className:"material-icons text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5",children:"psychology"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-blue-900 dark:text-blue-100 text-sm",children:"Supervisión Profesional"}),e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300 mt-1 leading-relaxed",children:["Es requisito indispensable que la institución cuente con un"," ",e.jsx("strong",{children:"Licenciado/a en Psicología"})," en planta que pueda ejercer el rol de tutor/a y supervisar tu práctica."]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-slate-800 dark:text-slate-100 text-sm flex items-center gap-2",children:[e.jsx("span",{className:"material-icons text-emerald-500 !text-lg",children:"new_releases"}),"Solo para Nuevos Espacios"]}),e.jsxs("p",{className:"text-sm text-slate-600 dark:text-slate-400 mt-1 leading-relaxed",children:["El objetivo de este trámite es la apertura de convenios en instituciones donde"," ",e.jsx("strong",{children:"no tenemos oferta actual"}),". Por favor, verifica que la institución que propones ",e.jsx("strong",{children:"NO"})," esté en el siguiente listado."]})]}),e.jsxs("div",{className:"border border-slate-200 dark:border-slate-700 rounded-xl overflow-hidden flex flex-col h-96",children:[e.jsx("div",{className:"p-3 bg-slate-50 dark:bg-slate-800/50 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:e.jsx(ae,{placeholder:"Buscar institución en el listado actual...",icon:"search",value:l,onChange:u=>m(u.target.value),className:"bg-white dark:bg-slate-900"})}),e.jsx("div",{className:"overflow-y-auto p-2 bg-slate-50/30 dark:bg-slate-900/30 custom-scrollbar flex-grow",children:p&&p.length>0?e.jsx("ul",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:p.map((u,f)=>e.jsxs("li",{className:"text-xs px-3 py-2 bg-white dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 flex items-center gap-2 truncate",title:u,children:[e.jsx("span",{className:"material-icons !text-sm text-slate-400 shrink-0",children:"apartment"}),e.jsx("span",{className:"truncate font-medium",children:u})]},f))}):e.jsx("p",{className:"text-center text-sm text-slate-500 py-10 italic font-medium",children:a.length===0?"Cargando lista de instituciones...":"No se encontraron instituciones con ese nombre en el listado actual."})})]})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-200 dark:border-slate-700 bg-slate-50/50 dark:bg-slate-900/50 flex justify-end gap-3 safe-area-bottom",children:[e.jsx($,{variant:"secondary",onClick:i,children:"Cancelar"}),e.jsx($,{onClick:r,icon:"arrow_forward",children:"Comprendido, Continuar"})]})]})}):null};export{te as A,de as F,oe as P,ie as S,le as a};
