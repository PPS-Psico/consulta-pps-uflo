import{b as x,r as n,I as j,G as u,j as e,S as A}from"./index-Dad3ZKyZ.js";import{A as E}from"./AdminSearch-JWM3lazr.js";import{C as v}from"./ConvocatoriaManager-DP_L0wUa.js";import C from"./StudentDashboard-COlpJJcK.js";import{T as I}from"./Tabs-D8aDTDaN.js";import{M,T as D}from"./TimelineView-C6-Hd89U.js";import{S as N}from"./SubTabs-Mxfc1J-e.js";import{W as _}from"./WelcomeBannerAdmin-BlMou5dt.js";import{A as P}from"./AppModals-I6v2lf6L.js";import"./CollapsibleSection-B4FEAttR.js";import"./types-Cg8ilULs.js";import"./Select-Bw-EOem3.js";import"./PreSolicitudCheckModal-2C_uQ9eq.js";import"./ProfileView-DPGLu0qC.js";import"./ConvocatoriaCardPremium-DukTzvxC.js";import"./proxy-BLVNg83s.js";import"./differenceInDays-B0Mox2cD.js";import"./UnifiedTabs-BAqOjfdN.js";import"./types-CzNk-woI.js";const Z=()=>{const{authenticatedUser:s}=x(),[r,T]=n.useState([]),l=(s==null?void 0:s.orientaciones)||[],d="metrics",[b,c]=n.useState(d),[m,f]=n.useState("dashboard"),p=n.useCallback(o=>{if(!o)return;const a=o[j],i=o[u];if(!a||!i){alert("El registro del estudiante no tiene legajo o nombre completo.");return}if(r.some(S=>S.legajo===String(a))){c(String(a));return}const t={id:String(a),legajo:String(a),nombre:String(i)};T(S=>[...S,t]),c(String(a))},[r]),g=n.useCallback(o=>{T(a=>a.filter(i=>i.id!==o)),b===o&&c(d)},[b,d]),h=n.useMemo(()=>{const o=[{id:"dashboard",label:"Dashboard",icon:"bar_chart"},{id:"timeline",label:"Línea de Tiempo",icon:"timeline"}],a=[{id:"metrics",label:"Métricas",icon:"analytics",content:e.jsxs(e.Fragment,{children:[e.jsx(N,{tabs:o,activeTabId:m,onTabChange:f}),e.jsxs("div",{className:"mt-6",children:[m==="dashboard"&&e.jsx(M,{onStudentSelect:t=>p({id:"metrics-selection",createdTime:"",[j]:t.legajo,[u]:t.nombre})}),m==="timeline"&&e.jsx(D,{})]})]})},...l.length>0?[{id:"manager-jefe",label:"Gestión PPS",icon:"tune",content:e.jsx(v,{forcedOrientations:l})}]:[],{id:"search",label:"Buscar Alumno",icon:"person_search",content:e.jsx("div",{className:"p-4",children:e.jsx(E,{onStudentSelect:p})})}],i=r.map(t=>({id:t.id,label:t.nombre,icon:"school",content:e.jsx(A,{legajo:t.legajo,children:e.jsx(C,{user:t,showExportButton:!0},t.legajo)}),isClosable:!0}));return[...a,...i]},[r,l,p,m]);return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsx(_,{name:(s==null?void 0:s.nombre)||"Jefe de Cátedra"}),e.jsx(I,{tabs:h,activeTabId:b,onTabChange:c,onTabClose:g}),e.jsx(P,{})]})};export{Z as default};
