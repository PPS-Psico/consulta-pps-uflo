import{b as x,r as n,I as j,G as u,j as e,S as v}from"./index-Dad3ZKyZ.js";import{A}from"./AdminSearch-JWM3lazr.js";import{C as E}from"./ConvocatoriaManager-DP_L0wUa.js";import I from"./StudentDashboard-COlpJJcK.js";import{T as C}from"./Tabs-D8aDTDaN.js";import{M as D,T as M}from"./TimelineView-C6-Hd89U.js";import{S as N}from"./SubTabs-Mxfc1J-e.js";import{W as _}from"./WelcomeBannerAdmin-BlMou5dt.js";import{A as P}from"./AppModals-I6v2lf6L.js";import"./CollapsibleSection-B4FEAttR.js";import"./types-Cg8ilULs.js";import"./Select-Bw-EOem3.js";import"./PreSolicitudCheckModal-2C_uQ9eq.js";import"./ProfileView-DPGLu0qC.js";import"./ConvocatoriaCardPremium-DukTzvxC.js";import"./proxy-BLVNg83s.js";import"./differenceInDays-B0Mox2cD.js";import"./UnifiedTabs-BAqOjfdN.js";import"./types-CzNk-woI.js";const Z=()=>{const{authenticatedUser:i}=x(),[r,T]=n.useState([]),l=(i==null?void 0:i.orientaciones)||[],b="metrics",[d,c]=n.useState(b),[m,g]=n.useState("dashboard"),p=n.useCallback(a=>{if(!a)return;const o=a[j],s=a[u];if(!o||!s){alert("El registro del estudiante no tiene legajo o nombre completo.");return}if(r.some(S=>S.legajo===String(o))){c(String(o));return}const t={id:String(o),legajo:String(o),nombre:String(s)};T(S=>[...S,t]),c(String(o))},[r]),f=n.useCallback(a=>{T(o=>o.filter(s=>s.id!==a)),d===a&&c(b)},[d,b]),h=n.useMemo(()=>{const a=[{id:"dashboard",label:"Dashboard",icon:"bar_chart"},{id:"timeline",label:"Línea de Tiempo",icon:"timeline"}],o=[{id:"metrics",label:"Métricas",icon:"analytics",content:e.jsxs(e.Fragment,{children:[e.jsx(N,{tabs:a,activeTabId:m,onTabChange:g}),e.jsxs("div",{className:"mt-6",children:[m==="dashboard"&&e.jsx(D,{onStudentSelect:t=>p({id:"metrics-selection",createdTime:"",[j]:t.legajo,[u]:t.nombre})}),m==="timeline"&&e.jsx(M,{})]})]})},...l.length>0?[{id:"manager-jefe",label:"Gestión PPS",icon:"tune",content:e.jsx(E,{forcedOrientations:l})}]:[],{id:"search",label:"Buscar Alumno",icon:"person_search",content:e.jsx("div",{className:"p-4",children:e.jsx(A,{onStudentSelect:p})})}],s=r.map(t=>({id:t.id,label:t.nombre,icon:"school",content:e.jsx(v,{legajo:t.legajo,children:e.jsx(I,{user:t,showExportButton:!0},t.legajo)}),isClosable:!0}));return[...o,...s]},[r,l,p,m]);return e.jsxs("div",{className:"space-y-8 animate-fade-in-up",children:[e.jsx(_,{name:(i==null?void 0:i.nombre)||"Directivo"}),e.jsx(C,{tabs:h,activeTabId:d,onTabChange:c,onTabClose:f}),e.jsx(P,{})]})};export{Z as default};
